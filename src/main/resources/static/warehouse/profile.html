<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
    <title>Blank Page &mdash; Stisla</title>

    <!-- General CSS Files -->
    <link rel="stylesheet" href="../assets/modules/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/modules/fontawesome/css/all.min.css">

    <!-- CSS Libraries -->

    <!-- Template CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <!-- Start GA -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-94034622-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-94034622-3');
    </script>
    <!-- /END GA --></head>

<body>
<div id="app">
    <div class="main-wrapper main-wrapper-1">
        <div class="navbar-bg"></div>
        <nav class="navbar navbar-expand-lg main-navbar">
            <form class="form-inline mr-auto">
                <ul class="navbar-nav mr-3">
                    <li><a href="#" data-toggle="sidebar" class="nav-link nav-link-lg"><i class="fas fa-bars"></i></a>
                    </li>
                    <li><a href="#" data-toggle="search" class="nav-link nav-link-lg d-sm-none"><i
                            class="fas fa-search"></i></a></li>
                </ul>
                <div class="search-element">
                    <div class="search-backdrop"></div>
                    <div class="search-result"></div>
                </div>
            </form>
            <ul class="navbar-nav navbar-right">
                <li class="dropdown"><a href="#" data-toggle="dropdown"
                                        class="nav-link dropdown-toggle nav-link-lg nav-link-user">
                    <img alt="image" src="../assets/img/avatar/avatar-1.png" class="rounded-circle mr-1">
                    <div class="d-sm-none d-lg-inline-block" id="count"></div>
                </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a href="profile.html" class="dropdown-item has-icon">
                            <i class="far fa-user"></i> Profile
                        </a>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item text-danger btn btn-icon ml-3" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </li>
            </ul>
        </nav>

        <div class="main-sidebar sidebar-style-2">
            <aside id="sidebar-wrapper">
                <div class="sidebar-brand">
                    <a href="warehouseIndex.html">物资分配调拨决策支持系统</a>
                </div>
                <div class="sidebar-brand sidebar-brand-sm">
                    <a href="/index.html">仓库</a>
                </div>

                <ul class="sidebar-menu">
                    <li class="menu-header">控制台</li>
                    <li><a class="nav-link" href="warehouseIndex.html"><i class="fas fa-align-left"></i>
                        <span>分配任务</span></a></li>
                    <li><a class="nav-link" href="../../templates/warehouse/supply.html"><i class="fas fa-pencil-alt"></i> <span>商品库存查看与修改</span></a>
                    </li>
                </ul>

                <div class="mt-4 mb-4 p-3 hide-sidebar-mini">
                    <a href="https://getstisla.com/docs" class="btn btn-primary btn-lg btn-block btn-icon-split">
                        <i class="fas fa-rocket"></i> Documentation
                    </a>
                </div>
            </aside>
        </div>

        <!-- Main Content -->
        <!-- Main Content -->
        <div class="main-content">
            <section class="section">
                <div class="section-header">
                    <h1>Profile</h1>
                    <div class="section-header-breadcrumb">
                        <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
                        <div class="breadcrumb-item">Profile</div>
                    </div>
                </div>
                <div class="section-body">
                    <h2 class="section-title">Hi!</h2>
                    <p class="section-lead">
                        Change information on this page.
                    </p>

                    <div class="row mt-sm-4">
                        <div class="col-12 col-md-12 col-lg-5">
                            <div class="card profile-widget">
                                <div class="profile-widget-header">
                                    <img alt="image" src="../assets/img/avatar/avatar-1.png"
                                         class="rounded-circle profile-widget-picture">
                                    <div class="profile-widget-items">
                                        <!--                                        <div class="profile-widget-item">-->
                                        <!--                                            <div class="profile-widget-item-label">Posts</div>-->
                                        <!--                                            <div class="profile-widget-item-value">187</div>-->
                                        <!--                                        </div>-->
                                        <!--                                        <div class="profile-widget-item">-->
                                        <!--                                            <div class="profile-widget-item-label">Followers</div>-->
                                        <!--                                            <div class="profile-widget-item-value">6,8K</div>-->
                                        <!--                                        </div>-->
                                        <!--                                        <div class="profile-widget-item">-->
                                        <!--                                            <div class="profile-widget-item-label">Following</div>-->
                                        <!--                                            <div class="profile-widget-item-value">2,1K</div>-->
                                        <!--                                        </div>-->
                                    </div>
                                </div>
                                <div class="profile-widget-description" id="remark">
                                    <div class="profile-widget-name"><span id="name"></span>
                                        <div class="text-muted d-inline font-weight-normal">
                                            <div class="slash"></div>
                                            <span id="type"></span>
                                        </div>
                                    </div>
                                    <!--                                    Ujang maman is a superhero name in <b>Indonesia</b>, especially in my family. He is not a fictional character but an original hero in my family, a hero for his children and for his wife. So, I use the name as a user in this template. Not a tribute, I'm just bored with <b>'John Doe'</b>.-->
                                </div>
                                <!--                                <div class="card-footer text-center">-->
                                <!--                                    <div class="font-weight-bold mb-2">Follow Ujang On</div>-->
                                <!--                                    <a href="#" class="btn btn-social-icon btn-facebook mr-1">-->
                                <!--                                        <i class="fab fa-facebook-f"></i>-->
                                <!--                                    </a>-->
                                <!--                                    <a href="#" class="btn btn-social-icon btn-twitter mr-1">-->
                                <!--                                        <i class="fab fa-twitter"></i>-->
                                <!--                                    </a>-->
                                <!--                                    <a href="#" class="btn btn-social-icon btn-github mr-1">-->
                                <!--                                        <i class="fab fa-github"></i>-->
                                <!--                                    </a>-->
                                <!--                                    <a href="#" class="btn btn-social-icon btn-instagram">-->
                                <!--                                        <i class="fab fa-instagram"></i>-->
                                <!--                                    </a>-->
                                <!--                                </div>-->
                            </div>
                        </div>
                        <div class="col-12 col-md-12 col-lg-7">
                            <div class="card">
                                <div class="card-header">
                                    <h4>Edit Profile</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="form-group col-md-6 col-12">
                                            <label>ID</label>
                                            <input type="text" class="form-control" required="" id="editId" disabled="disabled">
                                            <div class="invalid-feedback">
                                                Please fill in the first name
                                            </div>
                                        </div>
                                        <div class="form-group col-md-6 col-12">
                                            <label>昵称</label>
                                            <input type="text" class="form-control" required="" id="editName">
                                            <div class="invalid-feedback">
                                                Please fill in the last name
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-6 col-12">
                                            <label>账户种类</label>
                                            <input class="form-control" id="typeList" disabled="disabled">
                                            </input>
                                        </div>
                                        <div class="form-group col-md-6 col-12">
                                            <label>所属</label>
                                            <select class="form-control" id="list" disabled="disabled">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-7 col-12">
                                            <label>密码</label>
                                            <input type="password" class="form-control" required="" id="editPass">
                                            <div class="invalid-feedback">
                                                Please fill in the email
                                            </div>
                                        </div>
                                        <div class="form-group col-md-5 col-12">
                                            <label>确认密码</label>
                                            <input type="password" class="form-control" value="" id="editPass2">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-12">
                                            <label>备注</label>
                                            <textarea class="form-control summernote-simple" id="editRemark"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-right">
                                    <button class="btn btn-primary" id="commitBtn">Save Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <footer class="main-footer">
            <div class="footer-left">
                Copyright &copy; 2018
                <div class="bullet"></div>
                Design By <a href="https://nauval.in/">Muhamad Nauval Azhar</a>
            </div>
            <div class="footer-right">

            </div>
        </footer>
    </div>
</div>

<!-- General JS Scripts -->
<script src="../assets/modules/jquery.min.js"></script>
<script src="../assets/modules/popper.js"></script>
<script src="../assets/modules/tooltip.js"></script>
<script src="../assets/modules/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/modules/nicescroll/jquery.nicescroll.min.js"></script>
<script src="../assets/modules/moment.min.js"></script>
<script src="../assets/js/stisla.js"></script>

<!-- JS Libraies -->
<script src="../assets/modules/sweetalert/sweetalert.min.js"></script>
<script src="../assets/js/page/forms-advanced-forms.js"></script>

<!-- Page Specific JS File -->

<!-- Template JS File -->
<script src="../assets/js/scripts.js"></script>
<script src="../assets/js/custom.js"></script>

<script src="../management.js"></script>
<script src="js/userInfo.js"></script>

<script>
    getJSON('http://81.70.41.11:8082/userInfo', (result) => {
        $('#name').text(result['name'])
        $('#type').text(result['type'])
        $('#editName').val(result['name'])
        $('#editId').val(result['id'])
        $("#typeList").val(result['type'])
        switchList()
        $("#list").val(result['info'])
        $('#remark').append(result['remark'])
        $('#editRemark').val(result['remark'])

        if (!userID) {
            $('#typeList').attr('disabled', 'disabled')
            $('#list').attr('disabled', 'disabled')
        }
    })

    $('#commitBtn').click(() => {
        if ($('#editPass').val() !== $('#editPass2').val()) {
            $('#editPass').css('border-color', 'red')
            $('#editPass2').css('border-color', 'red')
        }else{
            info = {
                id: $('#editId').val(),
                name: $('#editName').val(),
                remark: $('#editRemark').val(),
                password: $('#editPass').val()
            }

            postJSON('http://81.70.41.11:8082/updateUserInfo', info, (result) => {
                swal('修改成功', {
                    icon: 'success'
                }).then(() => {
                    window.location.reload()
                })
            })
        }

    })

</script>
</body>
</html>